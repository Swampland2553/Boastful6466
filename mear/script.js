document.addEventListener('DOMContentLoaded', () => {

    // =================================================================
    //  ฑ. ูุฑฺฉุฒ ุฏุงุฏูโูุง (Data Hub)
    //  ุชูุงู ูุญุชูุง ูุฑุงุญู ุจู ุตูุฑุช ฺฉ ุขุจุฌฺฉุช ุฌุงูุงุงุณฺฉุฑูพุช ุฐุฎุฑู ุดุฏู ุงุณุช.
    //  ุงู ฺฉุงุฑ ุจุงุนุซ ูโุดูุฏ ฺฉุฏ ุชูุฒุชุฑ ู ูุฏุฑุช ุขู ุขุณุงูโุชุฑ ุจุงุดุฏ.
    // =================================================================
    const levelsData = [
        {
            level: 1,
            title: "๐ต๏ธ ยซฺฉุงุฑุขฺฏุงู ุฒูุงูยป",
            subtitle: "ููุท ุจููุณ ฺู ฺฉุงุฑ ฺฉุฑุฏ!",
            mission: "ุฎู ุณุงุฏู! ุงุฒ ุงูุดุจุ ูุฑ ุดุจ ูุจู ุงุฒ ุฎูุงุจุ ุฏูุชุฑ ุจุฑูุงููโุฑุฒุช ุฑู ุจุงุฒ ฺฉู ู ููุท ุจููุณ ฺฉู ุงูุฑูุฒ ฺู ฺฉุงุฑูุง ุงูุฌุงู ุฏุงุฏ ู ุญุฏูุฏุงู ฺูุฏุฑ ุจุฑุงุดูู ููุช ฺฏุฐุงุดุช.",
            exampleHTML: `
                <div class="example-section">
                    <strong>๐ ูุซุงู ฺฏุฒุงุฑุด ฺฉ ฺฉุงุฑุขฺฏุงู ุญุฑููโุง (ุจุฑุง ุฑูุฒ ุดูุจู):</strong>
                    <ul>
                        <li><b>ุจุงุฒู ุตุจุญ:</b> "ุญุฏูุฏ ฑ.ต ุณุงุนุช ุฑุงุถ ุฎููุฏู (ูุจุญุซ ุงุญุชูุงู)."</li>
                        <li><b>ุจุงุฒู ุธูุฑ:</b> "ุญุฏูุฏ ฑ ุณุงุนุช ุฒุณุช ุฎููุฏู (ูุตู ฑ)."</li>
                        <li><b>ุจุงุฒู ุนุตุฑ:</b> "ุญุฏูุฏ ดต ุฏููู ุชุณุช ุดู ุฒุฏู."</li>
                        <li><b>ุจุงุฒู ุดุจ:</b> "ุชฺฉุงูู ุฒุจุงู ุฑู ุงูุฌุงู ุฏุงุฏู."</li>
                    </ul>
                </div>`,
            whyMagic: "ุงู ฺฉุงุฑ ูุซู ุงูู ฺฉู ฺฉ ุฏฺฉุชุฑ ูุจู ุงุฒ ุชุฌูุฒ ุฏุงุฑูุ ุงูู ุงุฒุช ุขุฒูุงุด ูโฺฏุฑู. ูุง ุจุง ุงู ฺฏุฒุงุฑุดโููุณุ ุฏุงุฑู ุงุฒ ุณุจฺฉ ุฒูุฏฺฏ ู ูุทุงูุนูโููู ฺฉ <strong>ุนฺฉุณ ุฏูู ู ุจุฏูู ููุชุฑ</strong> ูโฺฏุฑู. ุงู ุนฺฉุณ ุจู ูุฑ ุฏู ูุง ฺฉูฺฉ ูโฺฉูู ุจูููู: <ul><li>โฐ ูุงูุนุงู ฺูุฏุฑ ุฒูุงู ุจุฑุง ูุทุงูุนู ุฏุงุฑูุ</li><li>โก๏ธ ุจุดุชุฑ ฺู ููุชโูุง ุงุฒ ุฑูุฒ ุงูุฑฺ ู ุชูุฑฺฉุฒ ุฏุงุฑูุ</li><li>๐ ฺู ุฏุฒุฏูุง ุฒูุงูโุง ุฏุฑ ฺฉูู ูุง ูุณุชูุ</li></ul>",
            commitment: "๐ค ุชุนูุฏ ูุง ุฏุฑ ุณุทุญ ฑ: ููุท ู ููุท ููู! ูุฑ ุดุจุ ฺฏุฒุงุฑุด ฺฉุงุฑูุง ุงูู ุฑูุฒ ุฑู ุจููุณ. ุงู ฺฉุงุฑ ุณุงุฏูุ ุงููู ู ูููโุชุฑู ูุฏู ุจุฑุง ุจู ุฏุณุช ุขูุฑุฏู <strong>ูุฏุฑุช ุขฺฏุงู</strong> ุงุณุช."
        },
        {
            level: 2,
            title: "๐๏ธ ยซูุนูุงุฑ ุฑูุฒยป",
            subtitle: "ุงุฒ ุงูุดุจ ุจุฑุง ูุฑุฏุง ุจููุณ!",
            mission: "ุงุฒ ุงู ุจู ุจุนุฏุ ุจู ุฌุง ุงูฺฉู ุดุจ ฺฏุฒุงุฑุด ฺฉุงุฑูุง ุงูุฌุงูโุดุฏู ุฑู ุจููุณุ <strong>ุงุฒ ุดุจ ูุจูุ ููุดู ู ุงุณฺฉูุช ฺฉุงุฑูุง ฺฉู ูุฑุฏุง ูโุฎูุง ุงูุฌุงู ุจุฏ ุฑู ุทุฑุงุญ ูโฺฉู.</strong>",
            exampleHTML: `
                <div class="example-section">
                    <strong>๐ ูุซุงู ููุดู ฺฉ ูุนูุงุฑ (ุจุฑุง ุฑูุฒ ฺฉุดูุจู):</strong>
                    <ul>
                        <li><b>ูพุฑูฺู ฑ (ฺฉุดูุจู):</b> "ูุทุงูุนู ุงุฏุจุงุช (ุฏุฑุณ ณ)."</li>
                        <li><b>ูพุฑูฺู ฒ (ฺฉุดูุจู):</b> "ุญู ุชูุฑูโูุง ูุฒฺฉ (ูุตู ฒ)."</li>
                        <li><b>ูพุฑูฺู ณ (ฺฉุดูุจู):</b> "ูุฑูุฑ ุฎูุงุตูโูุง ุฒุณุช."</li>
                        <li><b>ูพุฑูฺู ด (ฺฉุดูุจู):</b> "ุงูุฌุงู ุชฺฉุงูู ุนุฑุจ."</li>
                    </ul>
                </div>`,
            whyMagic: "ุงู ฺฉุงุฑ ูุซู ุงูู ฺฉู ูุจู ุงุฒ ุดุฑูุน ฺฉ ุณูุฑุ ููุดู ุฑู ูฺฏุงู ฺฉู. ููุช ุงุฒ ุดุจ ูุจู ูโุฏูู ูุฑุฏุง ูุฑุงุฑู ฺู ฺฉุงุฑูุง ุงูุฌุงู ุจุฏ: <ul><li>โ๏ธ ุตุจุญ ุจุง ูุฏู ูุดุฎุตโุชุฑ ุงุฒ ุฎูุงุจ ุจุฏุงุฑ ูโุด.</li><li>๐คฏ ุณุฑุฏุฑฺฏู ู ุงุชูุงู ููุช ุจุฑุง ุงูฺฉู \"ุญุงูุง ฺ ุจุฎูููุ\" ุงุฒ ุจู ูโุฑู.</li><li>๐ช ุจู ุฑูุฒุช ูุธู ู ุณุงุฎุชุงุฑ ูโุฏ ู <strong>ุญุณ ฺฉูุชุฑู</strong> ุจุดุชุฑ ุฑู ุฒูุงูุช ูพุฏุง ูโฺฉู.</li></ul>",
            commitment: "๐ค ุชุนูุฏ ูุง ุฏุฑ ุณุทุญ ฒ: ูุฑ ุดุจุ ููุท ูุณุช ูพุฑูฺูโูุง ฺฉู ูุฑุฏุง ุจุงุฏ ุงูุฌุงู ุจุฏ ุฑู ุจุฏูู ูฺ ุฌุฒุฆุงุช ุงุถุงููโุง ุจููุณ."
        },
        {
            level: 3,
            title: "๐ฆ ยซูุฑูุงูุฏู ุงุณุชุฑุงุชฺฺฉยป",
            subtitle: "ุงูู ฺฉุงุฑูุง ูููโุชุฑ!",
            mission: "ุงุฒ ุงูุดุจุ ููุช ุฏุงุฑ ูุณุช ฺฉุงุฑูุง ูุฑุฏุงุช ุฑู ูโููุณุ ฺฉูุงุฑ ูุฑ ฺฉุงุฑุ ฺฉ ุงุฒ ุงู ุณู ุฏุฑุฌู ุงููุช ุฑู ุจุฐุงุฑ:<ul><li><span class='level-a'>๐ด A (ูููโุงูุนุงุฏู ููู):</span> ฺฉุงุฑูุง ฺฉู ุญุชูุงู ู ุญุชูุงู ุจุงุฏ ูุฑุฏุง ุงูุฌุงู ุจุดู.</li><li><span class='level-b'>๐ก B (ููู):</span> ฺฉุงุฑูุง ฺฉู ุจูุชุฑู ุงูุฌุงู ุจุดู.</li><li><span class='level-c'>๐ข C (ฺฉู ุงููุช):</span> ฺฉุงุฑูุง ฺฉู ุงฺฏู ููุช ุงุถุงูู ุขูุฑุฏุ ุงูุฌุงู ูุฏ.</li></ul>",
            exampleHTML: `
                <div class="example-section">
                    <strong>๐ ูุซุงู ูุณุช ูุฑูุงู ฺฉ ูุฑูุงูุฏู (ุจุฑุง ุฑูุฒ ุดูุจู):</strong>
                    <table>
                        <tr><th>ุดูุจู</th></tr>
                        <tr><td>โ ฑ. [<span class='level-a'>A</span>] ูุทุงูุนู ุฒุณุช ูุตู ณ ุงุฒ ุฏูู</td></tr>
                        <tr><td>โ ฒ. [<span class='level-a'>A</span>] ุญู ุชูุฑูโูุง ูุดุชู ุฑุงุถ</td></tr>
                        <tr><td>โ ณ. [<span class='level-b'>B</span>] ูุฑูุฑ ูุบุงุช ุฒุจุงู ุฏุฑุณ ฒ</td></tr>
                        <tr><td>โ ด. [<span class='level-c'>C</span>] ุชูุฒ ฺฉุฑุฏู ุงุชุงู</td></tr>
                    </table>
                </div>`,
            whyMagic: "ุงู ููุงุฑุชุ ูุฑู ุจู ฺฉ ูุฑุฏ ูุนููู ู ฺฉ ูุฑุฏ ูููโุงูุนุงุฏู ููููู. ููุช ุงูููุชโุจูุฏ ูโฺฉู: <ul><li>๐ง <strong>ุงูุฑฺ ู ุชูุฑฺฉุฒุช ุฑู ุฑู ูููโุชุฑู ฺฉุงุฑูุง ูโุฐุงุฑ.</strong></li><li>๐ง <strong>ุงุฒ ุงุณุชุฑุณ \"ุจู ููู ฺฉุงุฑุงู ููโุฑุณู\" ุฎูุงุต ูโุด.</strong></li><li>๐ฏ <strong>ุชุตููโฺฏุฑ ููุดููุฏุงููโุชุฑ ุฏุงุฑ.</strong></li></ul>",
            commitment: "๐ค ุชุนูุฏ ูุง ุฏุฑ ุณุทุญ ณ: ูุฑ ุดุจุ ฺฉุงุฑูุงุช ุฑู ุงูููุชโุจูุฏ ฺฉู ู ูุณู ุจุฎูุฑ ฺฉู ููุดู ุงูู ุจู ุณุฑุงุบ <strong>ุณุฑุจุงุฒุงู ุฎุท ููุฏู (ฺฏุฑูู A)</strong> ุจุฑ."
        },
        {
            level: 4,
            title: "โฐ ยซุชฺฉโุชุฑุงูุฏุงุฒ ุฒูุงูยป",
            subtitle: "ูุฑ ฺฉุงุฑ ุฏุฑ ุฒูุงู ุฎูุฏุด!",
            mission: "ุญุงูุง ุนูุงูู ุจุฑ ุงูููุชโุจูุฏุ ุจุฑุง ฺฉุงุฑูุง ฺฏุฑูู A ู Bุ ฺฉ <strong>ุจุงุฒู ุฒูุงู ูุดุฎุต</strong> ุฏุฑ ุฌุฏูู ุฒูุงูโุจูุฏ ุจุงูุง ุตูุญู ุฏุฑ ูุธุฑ ูโฺฏุฑ.",
            exampleHTML: `
                <div class="example-section">
                    <strong>๐ ูุซุงู ููุดู ุดูฺฉ ฺฉ ุชฺฉโุชุฑุงูุฏุงุฒ (ุจุฑุง ุฑูุฒ ุฌูุนู):</strong>
                    <p><b>ูุณุช ุงูุฏุงู:</b></p>
                    <ul>
                        <li>[<span class='level-a'>A</span>] ูุทุงูุนู ุฒุณุช ูุตู ณ</li>
                        <li>[<span class='level-a'>A</span>] ุญู ุชูุฑู ุฑุงุถ (ุงุญุชูุงู + ูุดุชู)</li>
                        <li>[<span class='level-b'>B</span>] ูุฑูุฑ ุนุฑุจ ุงุฒุฏูู</li>
                    </ul>
                    <p><b>ุฒูุงูโุจูุฏ ุดูฺฉ:</b></p>
                    <ul>
                        <li><b>ุจุงุฒู น:ฐฐ ุชุง ฑฐ:ณฐ:</b> ๐ฏ ุดูฺฉ ุจู ูุฏู ุฒุณุช</li>
                        <li><b>ุจุงุฒู ฑฐ:ดต ุชุง ฑฒ:ฑต:</b> ๐ฏ ุดูฺฉ ุจู ูุฏู ุฑุงุถ</li>
                        <li><b>ุจุงุฒู ฑถ:ฐฐ ุชุง ฑท:ณฐ:</b> ๐ฏ ุดูฺฉ ุจู ูุฏู ุนุฑุจ</li>
                    </ul>
                </div>`,
            whyMagic: "ุงู ฺฉุงุฑุ ุจุฑูุงูู ุชู ุฑู ุงุฒ ฺฉ \"ูุณุช ุขุฑุฒููุง\" ุจู ฺฉ \"ููุดู ุนููุงุช ุฏูู\" ุชุจุฏู ูโฺฉูู. ููุช ุฒูุงูโุจูุฏ ูโฺฉู: <ul><li>โ๏ธ <strong>ฺฉ ุชุนูุฏ ุฌุฏ ุจุฑุง ุฎูุฏุช ุงุฌุงุฏ ูโฺฉู.</strong></li><li>๐ <strong>ุงุฒ ุงููุงูโฺฉุงุฑ ุฌููฺฏุฑ ูโฺฉู.</strong></li><li>๐ <strong>ุฏุฏ ูุงูุนโุจูุงููโุชุฑ ูุณุจุช ุจู ุฒูุงู ูพุฏุง ูโฺฉู.</strong></li></ul>",
            commitment: "๐ค ุชุนูุฏ ูุง ุฏุฑ ุณุทุญ ด: ุจุฑุง ุงูุฏุงู ูููุชุ ุจุงุฒูโูุง ุฒูุงู ูุดุฎุต ุฑู ุฏุฑ ุฌุฏูู ุจุงูุง ุตูุญู ูุดุฎุต ฺฉู ู ุจุง ุชูุงู ูุฌูุฏ ุจู ุงูู ูพุงุจูุฏ ุจุงุด."
        },
        {
            level: 5,
            title: "๐ฆ ยซฺูุฑุงู ููุชูยป",
            subtitle: "ูฺฏุงู ุงุฒ ุจุงูุง ุจู ฺฉู ููุชู!",
            mission: "ุงุฒ ุงู ุจู ุจุนุฏุ <strong>ุนุตุฑ ุฌูุนู ุง ุตุจุญ ุดูุจู</strong>ุ ฺูุฏ ุฏููู ููุช ูโุฐุงุฑ ู ูุซู ฺฉ ฺูุฑุงู ฺฉู ุฑู ููุดู ุฎู ุดุฏูุ ุจุฑุง ฺฉู ููุชู ุขูุฏู ฺฉ ุจุฑูุงููโุฑุฒ ฺฉู ุงูุฌุงู ูโุฏ.",
            exampleHTML: `
                <div class="example-section">
                    <strong>๐ ูุซุงู ููุดู ุฌูฺฏ ฺฉ ฺูุฑุงู (ุจุฑุง ฺฉ ููุชู ฺฉุงูู):</strong>
                    <ul>
                        <li><b>ุดูุจู:</b> ุตุจุญ: ุญููู ุจู ููุนู ุฒุณุช | ุนุตุฑ: ูพุดุชุจุงู ุดู</li>
                        <li><b>ฺฉุดูุจู:</b> ุตุจุญ: ูพุดุฑู ุฏุฑ ุฎุงฺฉ ูุฒฺฉ | ุนุตุฑ: ุชุซุจุช ููุงุถุน ุฑุงุถ</li>
                        <li><b>ุณูโุดูุจู:</b> ุตุจุญ: ูุชุญ ุฏุฑุณ ุงุฏุจุงุช | ุนุตุฑ: ูพุงฺฉุณุงุฒ ุชูุฑูุงุช ุนุฑุจ</li>
                        <li>ู ุจู ููู ุชุฑุชุจ ุจุฑุง ุชูุงู ุฑูุฒูุง ููุชู...</li>
                    </ul>
                </div>`,
            whyMagic: "ููุช ุจู ฺฉู ููุชู ูฺฏุงู ูโฺฉู: <ul><li>โ๏ธ <strong>ุชุนุงุฏู ุฑู ุจู ุฌุจููโูุง ูุฎุชูู (ุฏุฑุณโูุง) ุจุฑูุฑุงุฑ ูโฺฉู.</strong></li><li>๐ก๏ธ <strong>ุจุฑุง ุญููุงุช ุบุงููฺฏุฑฺฉููุฏู ุขูุงุฏู ูโุด.</strong></li><li>๐ <strong>ุงุณุชุฑุณ ุฑูุฒุงููโุงุช ฺฉูุชุฑ ูโุดู.</strong></li></ul>",
            commitment: "๐ค ุชุนูุฏ ูุง ุฏุฑ ุณุทุญ ต: ุฏุฑ ุงุจุชุฏุง ูุฑ ููุชูุ ฺฉ ููุดู ฺฉู ุจุฑุง ุชูุงู ุฑูุฒูุง ููุชู ุทุฑุงุญ ฺฉู. ุงู ููุดูุ ูุฑูุงู ุฌูฺฏ ุชู ุจุฑุง ท ุฑูุฒ ุขูุฏู ุงุณุช."
        },
        {
            level: 6,
            title: "๐ ยซููุฑูุงู ูพุฑูฺูยป",
            subtitle: "ูุฑุงุชุฑ ุงุฒ ุฏุฑุณุ ูฺฏุงู ุจู ุฌุงู ููุฑูุงู!",
            mission: "ููุช ุฏุงุฑ ุจุฑูุงูู ููุชฺฏ ุฑู ูโฺูุ ุจู ุฌุง ุงูฺฉู ููุท ุจููุณ \"ูุทุงูุนู ุฒุณุช\"ุ <strong>ูุงู ุฌุงู ู ูพุฑูฺู</strong> ุงูู ุจุงุฒู ุฒูุงู ุฑู ูุดุฎุต ูโฺฉู.",
            exampleHTML: `
                <div class="example-section">
                    <strong>๐ ูุซุงู ูุณุช ูพุฑูฺูโูุง ฺฉ ููุฑูุงู:</strong>
                    <ul>
                        <li><b>ุดูุจู:</b> ๐ <b>ูพุฑูฺู ุฒุณุช:</b> "ุงุชูุงู ฺฏูุชุงุฑ ฑ ูุตู ณ + ุชุณุชโูุง ุขููุฒุด"</li>
                        <li><b>ุณูโุดูุจู:</b> ๐ <b>ูพุฑูฺู ูุฒฺฉ:</b> "ูุฑูุฑ ูุตู ฒ + ุขูุงุฏฺฏ ุจุฑุง ฺฉูุฒ ฺูุงุฑุดูุจู"</li>
                        <li><b>ฺูุงุฑุดูุจู:</b> ๐ <b>ูพุฑูฺู ุฑุงุถ:</b> "ุฌูุนโุจูุฏ ูุจุญุซ ูุซูุซุงุช ุจุฑุง ุขุฒููู ุฌูุนู"</li>
                    </ul>
                </div>`,
            whyMagic: "ุงู ุณุทุญุ ุฐูู ุชู ุฑู ุงุฒ ุญุงูุช \"ุงูุฌุงู ูุธูู\" ุจู ุญุงูุช <strong>\"ุฑุณุฏู ุจู ูุฏู ู ฺฉุณุจ ุงูุชุฎุงุฑ\"</strong> ุชุบุฑ ูโุฏู. ููุช ูพุฑูฺู ูุญูุฑ ูฺฉุฑ ูโฺฉู: <ul><li>๐ฏ <strong>ูุทุงูุนูโุงุช ูุฏูููุฏ ู ูุนูุงุฏุงุฑ ูโุดู.</strong></li><li>๐ <strong>ูพุดุฑูุชุช ุฑู ุจู ุตูุฑุช ูุงูุน ู ููููุณ ูโุจู.</strong></li><li>๐ฅ <strong>ุจุฑุง ูุณุงุจูุงุช ุจุฒุฑฺฏ (ุขุฒูููโูุง ู ุงูุชุญุงูุงุช) ุฎู ุขูุงุฏูโุชุฑ ูโุด.</strong></li></ul>",
            commitment: "๐ค ุชุนูุฏ ูุง ุฏุฑ ุณุทุญ ถ: ุฏุฑ ุจุฑูุงูู ููุชฺฏ ุฎูุฏุชุ ุจุฑุง ูุฑ ุจุงุฒู ูุทุงูุนุงุชุ ฺฉ ูพุฑูฺู ู ฺฉ ุฌุงู ููุฑูุงู ูุดุฎุต ุชุนุฑู ฺฉู."
        }
    ];

    // =================================================================
    //  ฒ. ุงูุชุฎุงุจฺฏุฑูุง DOM (DOM Selectors)
    //  ุงููุงูโูุง HTML ฺฉู ุจุง ุขููุง ฺฉุงุฑ ุฏุงุฑู ุฑุง ฺฉุฌุง ุชุนุฑู ูโฺฉูู.
    // =================================================================
    const roadmapNav = document.getElementById('roadmap-nav');
    const contentDisplay = document.getElementById('level-content-display');
    const progressBar = document.getElementById('progress-bar');
    const confettiCanvas = document.getElementById('confetti-canvas');

    // =================================================================
    //  ณ. ุชูุงุจุน ุงุตู (Core Functions)
    // =================================================================

    /**
     * ููุงุด ูุญุชูุง ฺฉ ูุฑุญูู ูุดุฎุต
     * @param {number} levelIndex - ุงูุฏฺฉุณ ูุฑุญูู ุฏุฑ ุขุฑุงู levelsData
     */
    function displayLevel(levelIndex) {
        const level = levelsData[levelIndex];
        if (!level) return;

        // ุณุงุฎุช HTML ูุญุชูุง ุจู ุตูุฑุช ูพูุง
        const contentHTML = `
            <div class="content-card" data-level="${level.level}">
                <h2 id="level-title">${level.title}</h2>
                <p class="subtitle">${level.subtitle}</p>
                
                <h3>๐ฏ ูุฃููุฑุช ุดูุง:</h3>
                <p>${level.mission}</p>
                
                ${level.exampleHTML}
                
                <h3>โจ ฺุฑุง ุงู ูุฃููุฑุช ุฌุงุฏููุ</h3>
                <p>${level.whyMagic}</p>
                
                <div class="commitment">${level.commitment}</div>
            </div>
        `;
        
        contentDisplay.innerHTML = contentHTML;

        // ุงูฺฉุช ุชุงูพ ุจุฑุง ุนููุงู
        const titleElement = document.getElementById('level-title');
        const originalTitle = level.title;
        titleElement.textContent = '';
        typewriterEffect(titleElement, originalTitle, 50);

        // ุขูพุฏุช ฺฉุฑุฏู ฺฉูุงุณ active ุจุฑุง ุฏฺฉููโูุง
        updateActiveButton(levelIndex);

        // ุขูพุฏุช ฺฉุฑุฏู ููุงุฑ ูพุดุฑูุช
        updateProgressBar(levelIndex);
        
        // ุงฺฏุฑ ูุฑุญูู ุขุฎุฑ ุจูุฏุ ุฌุดู ุจฺฏุฑ!
        if (levelIndex === levelsData.length - 1) {
            launchConfetti();
        }
    }

    /**
     * ุงูฺฉุช ุชุงูพ ฺฉุฑุฏู ูุชู
     * @param {HTMLElement} element - ุงููุงู ฺฉู ูุชู ุฏุฑ ุขู ุชุงูพ ูโุดูุฏ.
     * @param {string} text - ูุชู ฺฉู ุจุงุฏ ุชุงูพ ุดูุฏ.
     * @param {number} speed - ุณุฑุนุช ุชุงูพ (ููโุซุงูู).
     */
    function typewriterEffect(element, text, speed) {
        let i = 0;
        function type() {
            if (i < text.length) {
                element.textContent += text.charAt(i);
                i++;
                setTimeout(type, speed);
            }
        }
        type();
    }
    
    /**
     * ุขูพุฏุช ฺฉุฑุฏู ุฏฺฉูู ูุนุงู ุฏุฑ ููฺฏุดู
     * @param {number} activeIndex - ุงูุฏฺฉุณ ุฏฺฉูู ูุนุงู
     */
    function updateActiveButton(activeIndex) {
        const buttons = roadmapNav.querySelectorAll('.level-button');
        buttons.forEach((button, index) => {
            if (index === activeIndex) {
                button.classList.add('active');
            } else {
                button.classList.remove('active');
            }
        });
    }

    /**
     * ุขูพุฏุช ฺฉุฑุฏู ููุงุฑ ูพุดุฑูุช
     * @param {number} levelIndex - ุงูุฏฺฉุณ ูุฑุญูู ูุนู
     */
    function updateProgressBar(levelIndex) {
        const progressPercentage = ((levelIndex + 1) / levelsData.length) * 100;
        progressBar.style.width = `${progressPercentage}%`;
    }

    /**
     * ุชุงุจุน ุงุตู ุจุฑุง ุฑุงูโุงูุฏุงุฒ ุจุฑูุงูู
     */
    function initializeApp() {
        // ุณุงุฎุช ุฏฺฉููโูุง ููฺฏุดู ุจู ุตูุฑุช ูพูุง
        levelsData.forEach((level, index) => {
            const button = document.createElement('button');
            button.className = 'level-button';
            button.textContent = `ุณุทุญ ${level.level}: ${level.title.split('ยซ')[1].split('ยป')[0]}`;
            button.dataset.levelIndex = index;

            button.addEventListener('click', () => {
                displayLevel(index);
            });

            roadmapNav.appendChild(button);
        });

        // ููุงุด ูุฑุญูู ุงูู ุจู ุตูุฑุช ูพุดโูุฑุถ
        displayLevel(0);
    }
    
    // =================================================================
    //  ด. ุจุฎุด ุงููุดู ุฌุดู (Confetti Animation)
    //  ฺฉ ุจุฎุด ูุงู ุจุฑุง ุฒุจุงุชุฑ ุดุฏู ฺฉุงุฑ
    // =================================================================
    const ctx = confettiCanvas.getContext('2d');
    let confettiParticles = [];

    function launchConfetti() {
        confettiCanvas.width = window.innerWidth;
        confettiCanvas.height = window.innerHeight;
        confettiParticles = [];
        for (let i = 0; i < 150; i++) {
            confettiParticles.push(createParticle());
        }
        animateConfetti();
    }

    function createParticle() {
        const x = Math.random() * confettiCanvas.width;
        const y = Math.random() * confettiCanvas.height - confettiCanvas.height;
        const size = Math.random() * 10 + 5;
        const color = `hsl(${Math.random() * 360}, 90%, 70%)`;
        const speedX = Math.random() * 6 - 3;
        const speedY = Math.random() * 5 + 2;
        return { x, y, size, color, speedX, speedY };
    }

    function animateConfetti() {
        ctx.clearRect(0, 0, confettiCanvas.width, confettiCanvas.height);
        let activeParticles = [];
        confettiParticles.forEach(p => {
            p.y += p.speedY;
            p.x += p.speedX;
            ctx.fillStyle = p.color;
            ctx.beginPath();
            ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
            ctx.fill();
            if(p.y < confettiCanvas.height) {
                activeParticles.push(p);
            }
        });
        confettiParticles = activeParticles;
        if (confettiParticles.length > 0) {
            requestAnimationFrame(animateConfetti);
        } else {
             ctx.clearRect(0, 0, confettiCanvas.width, confettiCanvas.height);
        }
    }


    // =================================================================
    //  ต. ุงุฌุฑุง ุจุฑูุงูู (App Execution)
    // =================================================================
    initializeApp();

});